<div class="c-table-header">
  <otp-filters>
    <otp-filter i18n-name="Table of observations|Name of a filter" name="Type" prop="observation-type" [values]="['operator', 'government']" default="operator" [required]="true"></otp-filter>
    <otp-filter i18n-name="Table of observations|Name of a filter" name="Country" prop="country.iso"></otp-filter>
    <otp-filter i18n-name="Table of observations|Name of a filter" name="Operator" prop="operator.name"></otp-filter>
    <otp-filter i18n-name="Table of observations|Name of a filter" name="Category" [prop]="observationType === 'operators' ? 'annex_operator.illegality' : 'annex_governance.governance_pillar'"></otp-filter>
    <otp-filter i18n-name="Table of observations|Name of a filter" name="Severity" prop="severity.level" [values]="[0, 1, 2, 3]"></otp-filter>
  </otp-filters>

  <a class="c-button -primary" routerLink="../new" i18n="Button to create a new observation">New observation</a>
</div>

<otp-table i18n-caption="Caption for the table which lists the observations" caption="Observations">
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the date of the observations" name="Date" prop="publication-date">
    <ng-template let-value="value" table-cell-template>{{getFormatedDate(value)}}</ng-template>
  </otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the country of the observations" name="Country" prop="country.name" [include]="true"></otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the operator name of the observations" name="Operator" prop="operator.name" [include]="true"></otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the category of the observations" name="Sub-category" prop="subcategory.name" [include]="true"></otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the details of the observations" name="Observation" prop="details"></otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the severity of the observations" name="Severity" prop="severity.level" [include]="true"></otp-table-column>
  <otp-table-column i18n-name="Table of observations|Name of the column corresponding to the status of the observations" name="Status">
    <ng-template let-row="row" table-cell-template>
      <ng-template [ngIf]="row['is-active']">Active</ng-template>
      <ng-template [ngIf]="!row['is-active']">Pending</ng-template>
    </ng-template>
  </otp-table-column>
  <!-- We need the user info for canEdit -->
  <otp-table-column i18n-name="Table of observations|Name of the actions columns (containing the edit and delete button)" name="Actions" prop="user" [include]="true">
    <ng-template let-row="row" table-cell-template>
      <ng-template [ngIf]="canEdit(row)">
        <button class="action" (click)="onEdit(row)" aria-label="Edit"><otp-icon name="#icon-edit"></otp-icon></button>
        <button class="action" (click)="onDelete(row)" aria-label="Delete"><otp-icon name="#icon-delete"></otp-icon></button>
      </ng-template>
    </ng-template>
  </otp-table-column>
</otp-table>
